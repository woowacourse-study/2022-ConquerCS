# Semaphore & Mutex

## Semaphore

> 멀티 프로그래밍 환경에서 공유 자원에 대한 접근 제한

- P(S): 임계 구역 들어가기 전, 자원 개수 S를 통해 프로세스 진입 여부 결정
  - 진입했다면, 다른 프로세스가 진입하지 못하도록 자원 개수 설정
- V(S): 임계 구역에서 나올 때, 자원 반납을 알리고 대기중이던 프로세스 wake up

## Mutex(Mutual Exclusion, 상호 배제)

> 임계 구역을 가진 스레드들이 동시에 실행되지 않고 각각 단독으로 실행되게 하는 기술

- lock: 임계 구역에 들어갈 권환 얻어옴
  - 다른 프로세스/스레드가 임계 구역 수행중이면 종료될 때 까지 대기
- unlock: 임계 구역 사용 종료 알림
  - 대기중이던 다른 프로세스/스레드가 진입할 수 있도록

→ 상태가 0 또는 1이기 때문에 `이진 세마포어`라고 불림

### Dekker 알고리즘

flag, turn 변수를 통해 결정

- flag: 임계구역에 진입할 프로세스 나타내는 변수
- turn: 누가 임계구역에 들어갈 차례인지 나타내는 변수
- 임계 구역 사용중인 process가 있다면 해당 process가 끝나야 turn 넘어감

### Peterson 알고리즘

데커와 유사하나, 다른 프로세스/스레드에게 진입 기회 양보

- 임계 구역 사용중이더라도 다른 process에게 turn을 양보하고, 그 process의 flag가 true이면 (진입을 시도하면) 대기

### Bakery 알고리즘

여러 프로세스/스레드에 대한 처리 가능

- 번호표 발급, 가장 먼저 번호표를 받은 프로세스가 임계구역 진입
  
  




