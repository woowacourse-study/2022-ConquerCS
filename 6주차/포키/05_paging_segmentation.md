# Paging & Segmentation

## 메모리 관리 기법

> 다중 프로그래밍 시스템에 여러 프로세스를 수용하기 위해 주기억장치 분할

- 연속 메모리 관리: 프로그램 전체가 하나의 커다란 공간에 연속적으로 할당
  - 고정 분할 기법: 고정된 파티션으로 분할(내부 단편화 발생)
  - 동적 분할 기법: 파티션 동적 생성, 자신의 크기와 같은 파티션에 적재(외부 단편화)
    - 단편화: 기억 장치의 빈 공간 또는 자료가 여러 조각으로 나뉘는 현상
- 불연속 메모리 관리: 프로그램의 일부가 서로 다른 주소 공간에 할당될 수 있음
  - 페이지: 사이즈가 고정된 작은 프로세스 조각
  - 프레임: 페이지와 같은 크기의 주기억장치 메모리 조각
  - 세그먼트: 서로 다른 크기의 논리적 블록이 연속적 공간에 배치되는 것

## Paging

- 단순 페이징
  - 각 프로세스는 프레임들과 같은 길이로 균등하게 나뉨 (고정 크기)
  - 외부 단편화 X
  - 내부 단편화 소량 존재
- 가상 메모리 페이징
  - 프로세스 페이지 전부를 로드할 필요 없이, 필요한 페이지가 있을 때 자동으로 로드
  - 외부 단편화 X
  - 메모리 관리 복잡 → 오버헤드 발생

## Segmentation

- 단순 세그먼테이션
  - 각 프로세스 여러 세그먼트들로 나뉨 (가변 크기)
  - 외부 단편화 존재
  - 내부 단편화 X
  - 메모리 사용 효율 개선
  - 동적 분할 → 오버헤드 감소
- 가상 메모리 세그먼테이션
  - 필요하지 않으면 로드하지 않고, 필요한 세그먼트 있을 때 자동으로 로드
  - 내부 단편화 X
  - 메모리 관리 복잡 → 오버헤드 발생

## 메모리 과할당(Over Allocation)

> 가상 메모리를 이용해 실제 메모리 사이즈보다 더 큰 사이즈의 메모리를 프로세스에 할당한 상황

### 과할당이 드러날 수 있는 상황

- 프로세스 실행 도중 Page Fault 발생
  - 프로그램의 주소 공간에는 존재하지만 시스템의 RAM에는 현재 없는 데이터에 접근 시도
- Page Fault가 일어난 페이지를 디스크에서 찾음
- 메모리에 페이지를 올려야 하는데, 모든 메모리가 사용중이라 빈 프레임이 없음

### 해결법 - 빈 프레임 확보

1. 메모리에 올라와있는 프로세스를 하나 종료시키기
   - 사용자에게 페이징 시스템을 들킴 → 하면 안된다
2. 프로세스 하나 swap out하고 해당 공간을 빈 프레임으로 활용 (페이지 교체)

---

### references

- [가상 메모리: 상세 정보 (mit.edu)](http://web.mit.edu/rhel-doc/4/RH-DOCS/rhel-isa-ko-4/s1-memory-virt-details.html)
