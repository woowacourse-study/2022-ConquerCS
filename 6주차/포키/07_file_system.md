# File System

> 파일 또는 자료에 대한 CRUD를 원활히 수행할 수 있도록 유지 및 관리하는 방법

### 특징

- 커널 영역에서 동작
- 계층적 디렉터리 구조
- 디스크 파티션 별로 하나씩 둘 수 있음

### 역할

- 파일 관리
- 보조 저장소 관리
- 파일 무결성 메커니즘
- 접근 방법 제공

### 개발 목적

- 하드디스크 - 메인메모리 속도 격차 감소
- 파일 관리
- 하드디스크 용량 효율적 이용

### 구조

- 메타 영역: 데이터 영역에 기록된 파일의 정보(이름, 위치, 크기, 시간, 삭제유무 등)
- 데이터 영역: 파일의 데이터

## 접근 방법

### Sequential Access(순차 접근)

- 테이프 모델 기반
- System Call 발생 시 현재 포인터에서 앞으로 보내면서 read & write 진행
- 뒤로 돌아갈 땐 지정한 offset만큼 되감기

### Direct Access(직접 접근)

- 디스크 모델 기반
- 파일은 고정 길이의 번호를 갖는 일련의 논리 레코드 집합으로 간주
- 읽기, 쓰기 순서의 제약이 없음
- 대규모 정보 접근에 유용 → DB에 활용

### 기타 접근

- 직접 접근 파일 기반
- index 파일을 활용하여 실제 파일 블록 가리킴
- 크기가 큰 파일의 입출력 탐색 도우는 방법

## 디렉터리와 디스크 구조

### 1단계 디렉터리

- 모든 파일이 하나의 디렉터리 내에 위치
- 파일들은 서로 unique한 이름 가짐
  - 서로 다른 사용자여도 중복 이름 사용 X
- 파일, 사용자 수 증가하면 관리 복잡

### 2단계 디렉터리

- 중앙에 마스터 파일 디렉터리(MFD)두고 그 아래에 사용자 별 파일 디렉터리(UFD)를 두는 2계층 구조
- MFD에서 사용자 이름, 계정 번호 가지고 UFD 관리
- 각 사용자 간 서로의 디렉터리 검색 불가 → 협력 및 파일 공류 어려움
- 특정 파일에 대해서는 사용자 이름 + 파일 이름 함께 지정 → 파일 이름 길어짐

### 트리 디렉터리

- 하나의 root directory + 여러개의 sub directory
  - 한 bit로 일반 파일(0), 디렉터리 파일(1) 구분
- DOS, Windows, UNIX 등의 운영체제에서 사용
- 디렉터리 생성, 파괴 비교적 용이
- 절대경로와 상대경로 사용

### 비순환 그래프 디렉터리(Asyclic Graph Directory)

- 트리 구조 확장 → 디렉터리 간 파일, 서브디렉터리 공유 허용
  - ex) 바로가기
- 복사가 아닌 공유
  - 한 디렉터리로부터 공유된 파일 또는 폴더가 수정되면 공유받는 다른 디렉터리에서도 변화를 볼 수 있음
- 구조 복잡, 하나의 파일에 대해 두 번 이상 탐색될 수 있음 → 성능 저하
- 공유된 파일 삭제 시 고아 포인터 발생
  - ex) 바로가기 눌렀는데 원본 파일 없는 경우

### 그래프 디렉터리

- 트리 구조 + Link → 순환 허용
- 탐색 알고리즘 간단 → 쉬운 파일 접근
- Garbage Collection 필요
  - 전 파일 시스템 탐색하여 사용 가능 메모리 목록 추가하는 것

---

### references

- [43_파일 접근 방법 (Access Method) :: Data Science Lab (sungwookkang.com)](https://sungwookkang.com/199)
- [[운영체제] 디렉터리 구조 (tistory.com)](https://jess2.tistory.com/86)
- [[운영체제 공부] 디렉터리 구조 :: 잡지식창고 (tistory.com)](https://blackjellybear.tistory.com/56)
